<div class="transaction-form-card">
  <h2>Nueva Transacción</h2>
  
  @if (showSuccess()) {
    <div class="success-message">
      ✓ Transacción agregada exitosamente
    </div>
  }

  <form (ngSubmit)="onSubmit()">
    <div class="form-group type-selector">
      <label>
        <input 
          type="radio" 
          name="type" 
          [value]="TransactionType.EXPENSE"
          [checked]="formData().type === TransactionType.EXPENSE"
          (change)="updateField('type', TransactionType.EXPENSE)">
        <span class="type-badge expense">Gasto</span>
      </label>
      <label>
        <input 
          type="radio" 
          name="type" 
          [value]="TransactionType.INCOME"
          [checked]="formData().type === TransactionType.INCOME"
          (change)="updateField('type', TransactionType.INCOME)">
        <span class="type-badge income">Ingreso</span>
      </label>
    </div>

    <div class="form-group">
      <label for="amount">Monto</label>
      <input 
        type="number" 
        id="amount" 
        [value]="formData().amount"
        (input)="updateField('amount', +$any($event.target).value)"
        placeholder="0.00"
        step="0.01"
        min="0"
        required>
    </div>

    <div class="form-group">
      <label for="description">Descripción</label>
      <input 
        type="text" 
        id="description" 
        [value]="formData().description"
        (input)="updateField('description', $any($event.target).value)"
        placeholder="¿Para qué fue?"
        required>
    </div>

    <div class="form-group">
      <label for="person">Persona</label>
      <select 
        id="person"
        [value]="formData().personId"
        (change)="updateField('personId', $any($event.target).value)"
        required>
        <option value="">Selecciona una persona</option>
        @for (person of dataService.people(); track person.id) {
          <option [value]="person.id">{{ person.name }}</option>
        }
      </select>
    </div>

    <div class="form-group">
      <label for="category">Categoría</label>
      <select 
        id="category"
        [value]="formData().categoryId"
        (change)="updateField('categoryId', $any($event.target).value)"
        required>
        <option value="">Selecciona una categoría</option>
        @for (category of dataService.categories(); track category.id) {
          <option [value]="category.id">{{ category.icon }} {{ category.name }}</option>
        }
      </select>
    </div>

    <div class="form-group">
      <label for="date">Fecha</label>
      <input 
        type="date" 
        id="date" 
        [value]="formData().date"
        (input)="updateField('date', $any($event.target).value)"
        required>
    </div>

    <button type="submit" class="btn-submit">
      Agregar {{ formData().type === TransactionType.EXPENSE ? 'Gasto' : 'Ingreso' }}
    </button>
  </form>
</div>
